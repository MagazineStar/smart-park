(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e26af5f"],{"0be5":function(e,t,r){"use strict";r("6be9")},"6be9":function(e,t,r){},8593:function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"i",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"h",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"j",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"a",(function(){return p})),r.d(t,"c",(function(){return f}));var n=r("b775");function a(){return Object(n["a"])({url:"/park/sys/role",method:"GET"})}function s(){return Object(n["a"])({url:"/park/sys/permision/all/tree",method:"GET"})}function c(e){return Object(n["a"])({url:"/park/sys/role/".concat(e),method:"GET"})}function i(e,t){return Object(n["a"])({url:"/park/sys/roleUser/".concat(e),method:"GET",params:t})}function o(e){return Object(n["a"])({url:"/park/sys/role",method:"POST",data:e})}function u(e){return Object(n["a"])({url:"/park/sys/role",method:"PUT",data:e})}function l(e){return Object(n["a"])({url:"/park/sys/role/".concat(e),method:"DELETE"})}function d(e){return Object(n["a"])({url:"/park/sys/user",params:e})}function p(e){return Object(n["a"])({url:"/park/sys/user",method:"POST",data:e})}function f(e){return Object(n["a"])({url:"/park/sys/user/".concat(e),method:"DELETE"})}},acff:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"role-container"},[r("div",{staticClass:"left-wrapper"},[e._l(e.roleList,(function(t,n){return r("div",{key:t.roleId,staticClass:"role-item",class:{active:n===e.activeIndex},on:{click:function(t){return e.menuChange(n)}}},[r("div",{staticClass:"role-info"},[r("svg-icon",{staticClass:"icon",attrs:{"icon-class":e.activeIndex===n?"user-active":"user"}}),e._v(" "+e._s(t.roleName)+" ")],1),r("div",{staticClass:"more"},[r("el-dropdown",[r("span",{staticClass:"el-dropdown-link"},[r("svg-icon",{attrs:{"icon-class":"more"}})],1),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return e.toEdit(t.roleId)}}},[e._v("编辑角色")]),r("el-dropdown-item",{nativeOn:{click:function(r){return e.deleteRole(t.roleId)}}},[e._v("删除")])],1)],1)],1)])})),r("el-button",{staticClass:"addBtn",attrs:{size:"mini"},on:{click:function(t){return e.$router.push("/sys/addRole")}}},[e._v("添加角色")])],2),r("div",{staticClass:"right-wrapper"},[r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"功能权限",name:"permisssion"}},[r("div",{staticClass:"tree-wrapper"},e._l(e.treeList,(function(t){return r("div",{key:t.id,staticClass:"tree-item"},[r("div",{staticClass:"tree-title"},[e._v(" "+e._s(t.title)+" ")]),r("el-tree",{ref:"tree",refInFor:!0,attrs:{data:t.children,props:e.defaultProps,"default-expand-all":!0,"node-key":"id","show-checkbox":""}})],1)})),0)]),r("el-tab-pane",{attrs:{label:"成员（"+e.total+"）",name:"employee"}},[r("div",{staticClass:"user-wrapper"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList}},[r("el-table-column",{attrs:{type:"index",width:"250",label:"序号"}}),r("el-table-column",{attrs:{prop:"name",label:"员工姓名"}}),r("el-table-column",{attrs:{prop:"userName",label:"登录账号"}})],1)],1)])],1)],1)])},a=[],s=r("c7eb"),c=r("1da1"),i=(r("14d9"),r("d3b7"),r("159b"),r("8593")),o={name:"Role",data:function(){return{roleList:[],activeIndex:0,treeList:[],defaultProps:{children:"children",label:"title"},activeName:"permisssion",params:{page:1,pageSize:10},total:1,userList:[]}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRoleList();case 2:return t.next=4,e.getTreeList();case 4:return t.next=6,e.menuChange(0);case 6:case"end":return t.stop()}}),t)})))()},methods:{deleteRole:function(e){var t=this;this.$confirm("确认删除该角色吗？","温馨提示").then(Object(c["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["d"])(e);case 2:t.$message.success("删除成功"),t.getRoleList();case 4:case"end":return r.stop()}}),r)})))).catch((function(){}))},toEdit:function(e){this.$router.push({path:"/sys/addRole",query:{id:e}})},getRoleUserList:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function r(){var n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["h"])(e,t.params);case 2:n=r.sent,t.total=n.data.total,t.userList=n.data.rows;case 5:case"end":return r.stop()}}),r)})))()},getRoleDetail:function(e){return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},getTreeList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["i"])();case 2:r=t.sent,e.treeList=r.data,e.addDisabledProp(e.treeList);case 5:case"end":return t.stop()}}),t)})))()},addDisabledProp:function(e){var t=this;e.forEach((function(e){e.disabled=!0,e.children&&t.addDisabledProp(e.children)}))},menuChange:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function r(){var n,a,c;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.activeIndex=e,n=t.roleList[e].roleId,r.next=4,t.getRoleDetail(n);case 4:a=r.sent,c=a.data.perms,t.$refs.tree.forEach((function(e,t){e.setCheckedKeys(c[t])})),t.getRoleUserList(n);case 8:case"end":return r.stop()}}),r)})))()},getRoleList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["g"])();case 2:r=t.sent,e.roleList=r.data;case 4:case"end":return t.stop()}}),t)})))()}}},u=o,l=(r("0be5"),r("2877")),d=Object(l["a"])(u,n,a,!1,null,"aaae5046",null);t["default"]=d.exports}}]);